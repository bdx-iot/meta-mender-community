header:
    version: 8

machine: tinker-rk3288

repos:
    meta-mender-community:
        layers:
            meta-mender-rockchip:

    poky:
        url: https://git.yoctoproject.org/git/poky
        refspec: thud
        layers:
            meta:
            meta-poky:
            meta-yocto-bsp:

    meta-openembedded:
        url: http://git.openembedded.org/meta-openembedded
        refspec: thud
        layers:
            meta-oe:

    meta-rockchip:
      url: git://git.yoctoproject.org/meta-rockchip
      refspec: thud

local_conf_header:
    rockchip-config: |
    IMAGE_INSTALL_append = " kernel-image kernel-devicetree"

    IMAGE_FSTYPES_remove = "rockchip-gpt-img"

    MENDER_IMAGE_BOOTLOADER_FILE = "u-boot-rockchip.img"
    MENDER_IMAGE_BOOTLOADER_BOOTSECTOR_OFFSET = "64"

    MENDER_UBOOT_STORAGE_INTERFACE = "mmc"
    MENDER_UBOOT_STORAGE_DEVICE = "1"

    # Do not really need a boot part and files in it,
    # but we need to satisfy a dependency that the sdimg format has.
    IMAGE_BOOT_FILES = "zImage"

    MENDER_FEATURES_ENABLE_append = " mender-image-sd"
    MENDER_FEATURES_DISABLE_append = " mender-image-uefi"
